var rulsefb2 = new Array();
rulsefb2[0] = "fb21vo.clspgr12gljyje = fb21vo.clspgr14jwgljyje + fb21vo.clspgr17jngljyje";// 2=4+7
rulsefb2[1] = "fb21vo.clspgr13gljybl = fb21vo.clspgr12gljyje / fb21vo.clspgr11jyzje";// 3=2/1
rulsefb2[2] = "fb21vo.clspgr15jwgljybl1 = fb21vo.clspgr14jwgljyje / fb21vo.clspgr11jyzje"; // 5=4/1
rulsefb2[3] = "fb21vo.clspgr16jwgljybl2 = fb21vo.clspgr14jwgljyje / fb21vo.clspgr12gljyje";// 6=4/2
rulsefb2[4] = "fb21vo.clspgr18jngljybl1 = fb21vo.clspgr17jngljyje / fb21vo.clspgr11jyzje"; // 8=7/1
rulsefb2[5] = "fb21vo.clspgr19jngljybl2 = fb21vo.clspgr17jngljyje / fb21vo.clspgr12gljyje"; // 9=7/2

rulsefb2[6] = "fb22vo.clspgr12gljyje = fb22vo.clspgr14jwgljyje + fb22vo.clspgr17jngljyje";// 2=4+7
rulsefb2[7] = "fb22vo.clspgr13gljybl = fb22vo.clspgr12gljyje / fb22vo.clspgr11jyzje";// 3=2/1
rulsefb2[8] = "fb22vo.clspgr15jwgljybl1 = fb22vo.clspgr14jwgljyje / fb22vo.clspgr11jyzje"; // 5=4/1
rulsefb2[9] = "fb22vo.clspgr16jwgljybl2 = fb22vo.clspgr14jwgljyje / fb22vo.clspgr12gljyje";// 6=4/2
rulsefb2[10] = "fb22vo.clspgr18jngljybl1 = fb22vo.clspgr17jngljyje / fb22vo.clspgr11jyzje"; // 8=7/1
rulsefb2[11] = "fb22vo.clspgr19jngljybl2 = fb22vo.clspgr17jngljyje / fb22vo.clspgr12gljyje"; // 9=7/2

rulsefb2[12] = "fb23vo.clspgr12gljyje = fb23vo.clspgr14jwgljyje + fb23vo.clspgr17jngljyje";// 2=4+7
rulsefb2[13] = "fb23vo.clspgr13gljybl = fb23vo.clspgr12gljyje / fb23vo.clspgr11jyzje";// 3=2/1
rulsefb2[14] = "fb23vo.clspgr15jwgljybl1 = fb23vo.clspgr14jwgljyje / fb23vo.clspgr11jyzje"; // 5=4/1
rulsefb2[15] = "fb23vo.clspgr16jwgljybl2 = fb23vo.clspgr14jwgljyje / fb23vo.clspgr12gljyje";// 6=4/2
rulsefb2[16] = "fb23vo.clspgr18jngljybl1 = fb23vo.clspgr17jngljyje / fb23vo.clspgr11jyzje"; // 8=7/1
rulsefb2[17] = "fb23vo.clspgr19jngljybl2 = fb23vo.clspgr17jngljyje / fb23vo.clspgr12gljyje"; // 9=7/2

rulsefb2[18] = "fb24vo.clspgr12gljyje = fb24vo.clspgr14jwgljyje + fb24vo.clspgr17jngljyje";// 2=4+7
rulsefb2[19] = "fb24vo.clspgr13gljybl = fb24vo.clspgr12gljyje / fb24vo.clspgr11jyzje";// 3=2/1
rulsefb2[20] = "fb24vo.clspgr15jwgljybl1 = fb24vo.clspgr14jwgljyje / fb24vo.clspgr11jyzje"; // 5=4/1
rulsefb2[21] = "fb24vo.clspgr16jwgljybl2 = fb24vo.clspgr14jwgljyje / fb24vo.clspgr12gljyje";// 6=4/2
rulsefb2[22] = "fb24vo.clspgr18jngljybl1 = fb24vo.clspgr17jngljyje / fb24vo.clspgr11jyzje"; // 8=7/1
rulsefb2[23] = "fb24vo.clspgr19jngljybl2 = fb24vo.clspgr17jngljyje / fb24vo.clspgr12gljyje"; // 9=7/2

rulsefb2[24] = "fb25vo.clspgr12gljyje = fb25vo.clspgr14jwgljyje + fb25vo.clspgr17jngljyje";// 2=4+7
rulsefb2[25] = "fb25vo.clspgr13gljybl = fb25vo.clspgr12gljyje / fb25vo.clspgr11jyzje";// 3=2/1
rulsefb2[26] = "fb25vo.clspgr15jwgljybl1 = fb25vo.clspgr14jwgljyje / fb25vo.clspgr11jyzje"; // 5=4/1
rulsefb2[27] = "fb25vo.clspgr16jwgljybl2 = fb25vo.clspgr14jwgljyje / fb25vo.clspgr12gljyje";// 6=4/2
rulsefb2[28] = "fb25vo.clspgr18jngljybl1 = fb25vo.clspgr17jngljyje / fb25vo.clspgr11jyzje"; // 8=7/1
rulsefb2[29] = "fb25vo.clspgr19jngljybl2 = fb25vo.clspgr17jngljyje / fb25vo.clspgr12gljyje"; // 9=7/2

rulsefb2[30] = "fb26vo.clspgr12gljyje = fb26vo.clspgr14jwgljyje + fb26vo.clspgr17jngljyje";// 2=4+7
rulsefb2[31] = "fb26vo.clspgr13gljybl = fb26vo.clspgr12gljyje / fb26vo.clspgr11jyzje";// 3=2/1
rulsefb2[32] = "fb26vo.clspgr15jwgljybl1 = fb26vo.clspgr14jwgljyje / fb26vo.clspgr11jyzje"; // 5=4/1
rulsefb2[33] = "fb26vo.clspgr16jwgljybl2 = fb26vo.clspgr14jwgljyje / fb26vo.clspgr12gljyje";// 6=4/2
rulsefb2[34] = "fb26vo.clspgr18jngljybl1 = fb26vo.clspgr17jngljyje / fb26vo.clspgr11jyzje"; // 8=7/1
rulsefb2[35] = "fb26vo.clspgr19jngljybl2 = fb26vo.clspgr17jngljyje / fb26vo.clspgr12gljyje"; // 9=7/2

rulsefb2[36] = "fb27vo.clspgr12gljyje = fb27vo.clspgr14jwgljyje + fb27vo.clspgr17jngljyje";// 2=4+7
rulsefb2[37] = "fb27vo.clspgr13gljybl = fb27vo.clspgr12gljyje / fb27vo.clspgr11jyzje";// 3=2/1
rulsefb2[38] = "fb27vo.clspgr15jwgljybl1 = fb27vo.clspgr14jwgljyje / fb27vo.clspgr11jyzje"; // 5=4/1
rulsefb2[39] = "fb27vo.clspgr16jwgljybl2 = fb27vo.clspgr14jwgljyje / fb27vo.clspgr12gljyje";// 6=4/2
rulsefb2[40] = "fb27vo.clspgr18jngljybl1 = fb27vo.clspgr17jngljyje / fb27vo.clspgr11jyzje"; // 8=7/1
rulsefb2[41] = "fb27vo.clspgr19jngljybl2 = fb27vo.clspgr17jngljyje / fb27vo.clspgr12gljyje"; // 9=7/2

rulsefb2[42] = "fb28vo.clspgr12gljyje = fb28vo.clspgr14jwgljyje + fb28vo.clspgr17jngljyje";// 2=4+7
rulsefb2[43] = "fb28vo.clspgr13gljybl = fb28vo.clspgr12gljyje / fb28vo.clspgr11jyzje";// 3=2/1
rulsefb2[44] = "fb28vo.clspgr15jwgljybl1 = fb28vo.clspgr14jwgljyje / fb28vo.clspgr11jyzje"; // 5=4/1
rulsefb2[45] = "fb28vo.clspgr16jwgljybl2 = fb28vo.clspgr14jwgljyje / fb28vo.clspgr12gljyje";// 6=4/2
rulsefb2[46] = "fb28vo.clspgr18jngljybl1 = fb28vo.clspgr17jngljyje / fb28vo.clspgr11jyzje"; // 8=7/1
rulsefb2[47] = "fb28vo.clspgr19jngljybl2 = fb28vo.clspgr17jngljyje / fb28vo.clspgr12gljyje"; // 9=7/2

rulsefb2[48] = "fb29vo.clspgr12gljyje = fb29vo.clspgr14jwgljyje + fb29vo.clspgr17jngljyje";// 2=4+7
rulsefb2[49] = "fb29vo.clspgr16jwgljybl2 = fb29vo.clspgr14jwgljyje / fb29vo.clspgr12gljyje";// 6=4/2
rulsefb2[50] = "fb29vo.clspgr19jngljybl2 = fb29vo.clspgr17jngljyje / fb29vo.clspgr12gljyje"; // 9=7/2

rulsefb2[51] = "fb210vo.clspgr12gljyje = fb210vo.clspgr14jwgljyje + fb210vo.clspgr17jngljyje";// 2=4+7
rulsefb2[52] = "fb210vo.clspgr16jwgljybl2 = fb210vo.clspgr14jwgljyje / fb210vo.clspgr12gljyje";// 6=4/2
rulsefb2[53] = "fb210vo.clspgr19jngljybl2 = fb210vo.clspgr17jngljyje / fb210vo.clspgr12gljyje"; // 9=7/2

rulsefb2[54] = "fb211vo.clspgr12gljyje = fb211vo.clspgr14jwgljyje + fb211vo.clspgr17jngljyje";// 2=4+7
rulsefb2[55] = "fb211vo.clspgr13gljybl = fb211vo.clspgr12gljyje / fb211vo.clspgr11jyzje";// 3=2/1
rulsefb2[56] = "fb211vo.clspgr15jwgljybl1 = fb211vo.clspgr14jwgljyje / fb211vo.clspgr11jyzje"; // 5=4/1
rulsefb2[57] = "fb211vo.clspgr16jwgljybl2 = fb211vo.clspgr14jwgljyje / fb211vo.clspgr12gljyje";// 6=4/2
rulsefb2[58] = "fb211vo.clspgr18jngljybl1 = fb211vo.clspgr17jngljyje / fb211vo.clspgr11jyzje"; // 8=7/1
rulsefb2[59] = "fb211vo.clspgr19jngljybl2 = fb211vo.clspgr17jngljyje / fb211vo.clspgr12gljyje"; // 9=7/2

rulsefb2[60] = "b5hjje1 = fb21vo.clspgr11jyzje + fb22vo.clspgr11jyzje + fb23vo.clspgr11jyzje + fb24vo.clspgr11jyzje + fb25vo.clspgr11jyzje + fb26vo.clspgr11jyzje + fb27vo.clspgr11jyzje + fb28vo.clspgr11jyzje + fb211vo.clspgr11jyzje";// 2=4+7
rulsefb2[61] = "b5hjje2 = fb21vo.clspgr12gljyje + fb22vo.clspgr12gljyje + fb23vo.clspgr12gljyje + fb24vo.clspgr12gljyje + fb25vo.clspgr12gljyje + fb26vo.clspgr12gljyje + fb27vo.clspgr12gljyje + fb28vo.clspgr12gljyje + fb29vo.clspgr12gljyje + fb210vo.clspgr12gljyje + fb211vo.clspgr12gljyje";// 3=2/1
rulsefb2[62] = "b5hjje4 = fb21vo.clspgr14jwgljyje + fb22vo.clspgr14jwgljyje + fb23vo.clspgr14jwgljyje + fb24vo.clspgr14jwgljyje + fb25vo.clspgr14jwgljyje + fb26vo.clspgr14jwgljyje + fb27vo.clspgr14jwgljyje + fb28vo.clspgr14jwgljyje + fb29vo.clspgr14jwgljyje + fb210vo.clspgr14jwgljyje + fb211vo.clspgr14jwgljyje"; // 5=4/1
rulsefb2[63] = "b5hjje6 = b5hjje4 / b5hjje2";// 6=4/2
rulsefb2[64] = "b5hjje7 = fb21vo.clspgr17jngljyje + fb22vo.clspgr17jngljyje + fb23vo.clspgr17jngljyje + fb24vo.clspgr17jngljyje + fb25vo.clspgr17jngljyje + fb26vo.clspgr17jngljyje + fb27vo.clspgr17jngljyje + fb28vo.clspgr17jngljyje + fb29vo.clspgr17jngljyje + fb210vo.clspgr17jngljyje + fb211vo.clspgr17jngljyje"; // 8=7/1
rulsefb2[65] = "b5hjje10 = b5hjje7 / b5hjje2"; // 9=7/2
var calObjfb2 = new caltb('t2');
calObjfb2.setRules(rulsefb2);

Ext.onReady(function() {
	try {
		var tb = new Ext.Toolbar({
					renderTo : "toolbar",
					items : ['-', '->', {
								id : "tempBtn",
								text : "暂存",
								iconCls : "save",
								handler : function() {
									save();
								},
								scope : this
							}, '-', {
								id : "printBtn",
								text : "打印",
								iconCls : "print",
								handler : function() {
									openMaxWindow("/WB395glqyFb2Action.do?pzXh="
											+ $F("pzxh") + "&handleCode=printData");
								},
								scope : this
							}, '-', {
								text : "关闭",
								iconCls : "close",
								handler : function() {
									window.close();
								},
								scope : this
							}]
				});
		initPage();
	} catch (e) {

	}
});

function initPage() {
		maxPage();
	if (!beforeInitPage()) {
		return;
	}
	readText();
	initCalTable(calObjfb2);
	runRulesForName(calObjfb2);

	if ($F("fb211vo.sfayqzbtqzl") == "0") {
		document.getElementById("sall").checked = true;
		document.getElementById("hh").checked = false;
	} else if ($F("fb211vo.sfayqzbtqzl") == "1") {
		document.getElementById("hh").checked = true;
		document.getElementById("sall").checked = false;
	}

	if ($F("fb211vo.mczbtqzl") == "0") {
		document.getElementById("gg").checked = true;
	} else if ($("fb211vo.mczbtqzl") == "1") {
		document.getElementById("gg").checked = false;
	}

	if ($F("fb211vo.sfqdcbftxy") == "0") {
		document.getElementById("ee").checked = true;
		document.getElementById("uu").checked = false;
	} else if ($F("fb211vo.sfqdcbftxy") == "1") {
		document.getElementById("uu").checked = true;
		document.getElementById("ee").checked = false;
	}
}

function setCheckValue1() {
	if (document.getElementById("sall").checked == true) {
		document.getElementById("hh").checked = false;
		document.getElementById("fb211vo.sfayqzbtqzl").value = "0";
	} else {
		document.getElementById("fb211vo.sfayqzbtqzl").value = "";
	}
}

function setCheckValue2() {
	if (document.getElementById("hh").checked == true) {
		document.getElementById("gg").checked = true;
		document.getElementById("sall").checked = false;
		document.getElementById("fb211vo.sfayqzbtqzl").value = "1";
	} else {
		document.getElementById("fb211vo.sfayqzbtqzl").value = "";
	}
}

function setCheckValue3() {
	if (document.getElementById("ee").checked == true) {
		document.getElementById("uu").checked = false;
		document.getElementById("fb211vo.sfqdcbftxy").value = "0";
	} else {
		document.getElementById("fb211vo.sfqdcbftxy").value = "";
	}
}

function setCheckValue4() {
	if (document.getElementById("uu").checked == true) {
		document.getElementById("ee").checked = false;
		document.getElementById("fb211vo.sfqdcbftxy").value = "1";
	} else {
		document.getElementById("fb211vo.sfqdcbftxy").value = "";
	}
}

function setCheckValue5() {
	if (document.getElementById("hh").checked == true) {
		document.getElementById("gg").checked = true;
	}
}

function save() {
	if (baseCheck()) {
		if (document.getElementById("gg").checked == true) {
			document.getElementById("fb211vo.mczbtqzl").value = "0";
		} else {
			document.getElementById("fb211vo.mczbtqzl").value = "1";
		}
		$('#sucessMsg').val("");
		$('#errorMessage').val("");
		$("#handleDesc").val("关联交易汇总表(表二)暂存");
		$("#handleCode").val("tempSave");		
		$("#fb212vo.clspgr11jyzje").val($F("b5hjje1"));
		$("#fb212vo.clspgr12gljyje").val($F("b5hjje2"));
		$("#fb212vo.clspgr14jwgljyje").val($F("b5hjje4"));
		$("#fb212vo.clspgr16jwgljybl2").val($F("b5hjje6"));
		$("#fb212vo.clspgr17jngljyje").val($F("b5hjje7"));
		$("#fb212vo.clspgr19jngljybl2").val($F("b5hjje10"));
		waitDialog();
//		new Ajax.Request('/WB395glqyFb2Action.do', {
//					method : 'post',
//					parameters : $('WB395GlqyForm').serialize(),
//					onComplete : function(originalRequest) {
//						Ext.MessageBox.hide();
//						ajaxUpdate(originalRequest.responseText, "update");
//						runMsg("0", false, null, 'WB395IndexForm');
//					},
//					onException : function() {
//						Ext.MessageBox.hide();
//						iconDialog('系统异常', 'ERROR');
//					}
//				});
		
		$.ajax({
			url : "/WB395glqyFb2Action.do",
			async : true,
			dataType : "html",
			data : $('#WB395GlqyForm').serialize(),
			type : 'post',
			error : function(XMLHttpRequest, textStatus, errorThrown) {
				alert('系统异常' + textStatus);
			},
			success : function(responseText, textStatus, XMLHttpRequest) {
				ajaxUpdate(responseText, "update");
				runMsg("0", false, null, 'WB395IndexForm');
			}
		});
		
	}
}

function baseCheck() {
	if ($F("fb211vo.sfayqzbtqzl") == "") {
		iconDialog('请选择本年度是否按要求准备同期资料', "WARNING");
		return false;
	}

	if ($F("fb211vo.sfqdcbftxy") == "") {
		iconDialog('请选择本年度是否签订成本分摊协议', "WARNING");
		return false;
	}
	return true;
}